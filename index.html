<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F - Code . X | Digital Future</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">
    
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        :root {
            --primary: #00f2ff;
            --secondary: #7000ff;
            --bg-dark: #050505;
        }

        body {
            background-color: var(--bg-dark);
            color: white;
            font-family: 'Space Grotesk', sans-serif;
            overflow-x: hidden;
        }

        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #000;
        }
        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }

        /* 3D Canvas Container */
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: -1;
        }

        /* Glassmorphism */
        .glass {
            background: rgba(20, 20, 20, 0.4);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }
        
        .glass-strong {
            background: rgba(5, 5, 5, 0.85);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Glitch Effect on Hover */
        .glitch-hover {
            position: relative;
        }
        .glitch-hover::before, .glitch-hover::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-dark);
        }
        .glitch-hover:hover::before {
            left: 2px;
            text-shadow: -1px 0 #ff00c1;
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim-1 2s infinite linear alternate-reverse;
        }
        .glitch-hover:hover::after {
            left: -2px;
            text-shadow: -1px 0 #00fff9;
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim-2 3s infinite linear alternate-reverse;
        }

        @keyframes glitch-anim-1 {
            0% { clip: rect(30px, 9999px, 10px, 0); }
            100% { clip: rect(70px, 9999px, 90px, 0); }
        }
        @keyframes glitch-anim-2 {
            0% { clip: rect(10px, 9999px, 80px, 0); }
            100% { clip: rect(90px, 9999px, 20px, 0); }
        }

        /* Neon Glow */
        .neon-text {
            text-shadow: 0 0 10px rgba(0, 242, 255, 0.5);
        }

        /* Loading Screen */
        #loader {
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease;
        }

        /* Modal Styles */
        .modal-open {
            overflow: hidden;
        }

        /* --- ADMIN PANEL STYLES (INTEGRATED) --- */
        .admin-overlay {
            position: fixed;
            inset: 0;
            background-color: #050505;
            z-index: 200; /* Above everything */
            display: none; /* Hidden by default */
            overflow: hidden;
        }
        
        .admin-visible {
            display: flex;
        }

        .cyber-grid {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 242, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 242, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            z-index: 0;
            pointer-events: none;
        }

        .scanline::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, transparent, rgba(0, 242, 255, 0.05), transparent);
            animation: scanline 4s linear infinite;
            pointer-events: none;
        }

        @keyframes scanline {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }

        .status-badge {
            font-size: 0.65rem;
            padding: 2px 8px;
            border-radius: 999px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
    </style>
</head>
<body class="antialiased selection:bg-cyan-500 selection:text-black">

    <!-- Loading Screen -->
    <div id="loader">
        <div class="font-mono text-cyan-400 text-xl animate-pulse text-center">
            INITIALIZING F - CODE . X SYSTEM...
        </div>
    </div>

    <!-- 3D Background -->
    <div id="canvas-container"></div>

    <!-- Navigation -->
    <nav class="fixed w-full z-50 glass-strong transition-all duration-300" id="navbar">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold tracking-widest relative group" data-text="F-CODE.X">
                <span class="text-cyan-400 font-mono">F</span> - CODE . X
            </a>
            
            <div class="hidden md:flex space-x-8 text-sm font-mono tracking-wider items-center">
                <a href="#home" class="hover:text-cyan-400 transition-colors">/HOME</a>
                <a href="#expertise" class="hover:text-cyan-400 transition-colors">/EXPERTISE</a>
                <a href="#work" class="hover:text-cyan-400 transition-colors">/WORK</a>
                <!-- Integrated Admin Button -->
                <button onclick="openAdminPanel()" class="text-gray-500 hover:text-red-400 transition-colors text-xs uppercase cursor-pointer tracking-widest" title="Restricted Access">/ADMIN PANEL</button>
                <a href="#contact" class="text-cyan-400 border border-cyan-400 px-4 py-1 hover:bg-cyan-400 hover:text-black transition-all">INIT_CONTACT</a>
            </div>

            <!-- Mobile Menu Button -->
            <button class="md:hidden text-white" onclick="document.getElementById('mobile-menu').classList.toggle('hidden')">
                <i data-lucide="menu"></i>
            </button>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden glass border-t border-gray-800 p-4">
            <div class="flex flex-col space-y-4 font-mono text-sm">
                <a href="#home" class="block hover:text-cyan-400">/HOME</a>
                <a href="#expertise" class="block hover:text-cyan-400">/EXPERTISE</a>
                <a href="#work" class="block hover:text-cyan-400">/WORK</a>
                <button onclick="openAdminPanel()" class="block text-gray-500 hover:text-red-400 text-left">/ADMIN PANEL</button>
                <a href="#contact" class="block text-cyan-400">INIT_CONTACT</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="relative z-10 pt-20">
        
        <!-- Hero Section -->
        <section id="home" class="min-h-screen flex items-center justify-center px-6 relative overflow-hidden">
            <div class="max-w-7xl mx-auto w-full grid md:grid-cols-2 gap-12 items-center">
                <div class="space-y-6 relative z-10">
                    <!-- Badge Text -->
                    <div class="inline-block px-3 py-1 border border-cyan-500/30 rounded-full bg-cyan-500/10 backdrop-blur-sm">
                        <span class="text-xs font-mono text-cyan-300">‚óè WELCOME TO OUR UNIVERSE</span>
                    </div>
                    
                    <h1 class="text-6xl md:text-8xl font-bold leading-tight glitch-hover" data-text="FUTURE DIGITAL ARCHITECTS">
                        FUTURE <br/>
                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500">DIGITAL</span> <br/>
                        ARCHITECTS
                    </h1>
                    
                    <p class="text-gray-300 text-lg md:text-xl max-w-lg font-light drop-shadow-md">
                        We don't just write code. We engineer digital realities. 
                        Merging aesthetics with high-performance logic.
                    </p>
                    
                    <div class="flex flex-wrap gap-4 pt-4">
                        <a href="#contact" class="bg-cyan-500 text-black px-8 py-4 font-bold hover:bg-white hover:scale-105 transition-all duration-300 font-mono shadow-[0_0_20px_rgba(0,242,255,0.4)]">
                            START PROJECT ->
                        </a>
                        <a href="#work" class="border border-white/20 hover:border-cyan-400 px-8 py-4 backdrop-blur-sm hover:bg-white/5 transition-all duration-300 font-mono flex items-center gap-2">
                            VIEW MODULES
                        </a>
                    </div>
                </div>
                
                <!-- Spacer for 3D visual balance -->
                <div class="hidden md:block"></div>
            </div>

            <!-- Scroll Indicator -->
            <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 animate-bounce">
                <i data-lucide="chevrons-down" class="text-cyan-500 w-8 h-8"></i>
            </div>
        </section>

        <!-- Expertise Section -->
        <section id="expertise" class="py-24 px-6 bg-gradient-to-b from-transparent via-black/90 to-black/95">
            <div class="max-w-7xl mx-auto">
                <div class="flex flex-col md:flex-row justify-between items-end mb-16 border-b border-gray-800 pb-8">
                    <div>
                        <h2 class="text-4xl font-bold mb-2">CORE CAPABILITIES</h2>
                        <p class="font-mono text-cyan-400 text-sm">/// SYSTEM_MODULES</p>
                    </div>
                    <p class="text-gray-400 max-w-md mt-4 md:mt-0 text-right">
                        High-frequency solutions for complex digital environments.
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Card 1 -->
                    <div class="glass p-8 rounded-none border-l-4 border-cyan-500 hover:bg-white/5 transition-all duration-300 group hover:-translate-y-2">
                        <div class="mb-6 p-4 bg-cyan-500/10 w-fit rounded-lg shadow-[0_0_15px_rgba(0,242,255,0.2)]">
                            <i data-lucide="box" class="w-8 h-8 text-cyan-400"></i>
                        </div>
                        <h3 class="text-2xl font-bold mb-3 group-hover:text-cyan-400 transition-colors">3D WEBGL</h3>
                        <p class="text-gray-400 leading-relaxed text-sm">
                            Immersive browser experiences using Three.js and WebGL. Breaking the flat web barrier.
                        </p>
                    </div>

                    <!-- Card 2 -->
                    <div class="glass p-8 rounded-none border-l-4 border-purple-500 hover:bg-white/5 transition-all duration-300 group hover:-translate-y-2">
                        <div class="mb-6 p-4 bg-purple-500/10 w-fit rounded-lg shadow-[0_0_15px_rgba(112,0,255,0.2)]">
                            <i data-lucide="cpu" class="w-8 h-8 text-purple-400"></i>
                        </div>
                        <h3 class="text-2xl font-bold mb-3 group-hover:text-purple-400 transition-colors">AI INTEGRATION</h3>
                        <p class="text-gray-400 leading-relaxed text-sm">
                            Neural networks and LLM integration for intelligent, adaptive user interfaces.
                        </p>
                    </div>

                    <!-- Card 3 -->
                    <div class="glass p-8 rounded-none border-l-4 border-pink-500 hover:bg-white/5 transition-all duration-300 group hover:-translate-y-2">
                        <div class="mb-6 p-4 bg-pink-500/10 w-fit rounded-lg shadow-[0_0_15px_rgba(236,72,153,0.2)]">
                            <i data-lucide="smartphone" class="w-8 h-8 text-pink-400"></i>
                        </div>
                        <h3 class="text-2xl font-bold mb-3 group-hover:text-pink-400 transition-colors">HYBRID APPS</h3>
                        <p class="text-gray-400 leading-relaxed text-sm">
                            Cross-platform mobile architecture ensuring performance parity with native code.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Stats Section -->
        <section class="py-20 border-y border-gray-800 bg-black/50 relative backdrop-blur-sm">
            <div class="max-w-7xl mx-auto px-6 grid grid-cols-2 md:grid-cols-4 gap-8 text-center font-mono">
                <div>
                    <div class="text-4xl font-bold text-white mb-2">98<span class="text-cyan-500">%</span></div>
                    <div class="text-xs text-gray-500">UPTIME EFFICIENCY</div>
                </div>
                <div>
                    <div class="text-4xl font-bold text-white mb-2">240<span class="text-purple-500">+</span></div>
                    <div class="text-xs text-gray-500">MODULES DEPLOYED</div>
                </div>
                <div>
                    <div class="text-4xl font-bold text-white mb-2">&lt;0.1<span class="text-pink-500">s</span></div>
                    <div class="text-xs text-gray-500">LATENCY</div>
                </div>
                <div>
                    <div class="text-4xl font-bold text-white mb-2">Global</div>
                    <div class="text-xs text-gray-500">NETWORK NODES</div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section id="contact" class="py-32 px-6">
            <div class="max-w-4xl mx-auto text-center">
                <h2 class="text-5xl md:text-7xl font-bold mb-8">READY TO <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-600">UPGRADE?</span></h2>
                <p class="text-xl text-gray-400 mb-12">Initialize collaboration sequence. We are listening.</p>
                
                <form id="contact-form" class="glass p-8 md:p-12 text-left max-w-2xl mx-auto space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block font-mono text-xs text-cyan-400 mb-2">IDENTIFIER / NAME</label>
                            <input type="text" id="name" required class="w-full bg-black/40 border border-gray-700 p-3 text-white focus:border-cyan-400 focus:outline-none transition-colors" placeholder="Enter ID">
                        </div>
                        <div>
                            <label class="block font-mono text-xs text-cyan-400 mb-2">FREQUENCY / EMAIL</label>
                            <input type="email" id="email" required class="w-full bg-black/40 border border-gray-700 p-3 text-white focus:border-cyan-400 focus:outline-none transition-colors" placeholder="Enter Email">
                        </div>
                    </div>
                    <div>
                        <label class="block font-mono text-xs text-cyan-400 mb-2">DATA PACKET / MESSAGE</label>
                        <textarea id="message" required rows="4" class="w-full bg-black/40 border border-gray-700 p-3 text-white focus:border-cyan-400 focus:outline-none transition-colors" placeholder="Transmission content..."></textarea>
                    </div>
                    <button type="submit" id="submit-btn" class="w-full bg-cyan-600/20 border border-cyan-500 text-cyan-400 py-4 font-mono font-bold hover:bg-cyan-500 hover:text-black transition-all duration-300 flex justify-center items-center group">
                        <span id="btn-text">[ TRANSMIT DATA ]</span>
                        <i data-lucide="send" id="btn-icon" class="ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform"></i>
                    </button>
                    <!-- Status Message Area -->
                    <div id="status-msg" class="text-center font-mono text-sm h-6"></div>
                </form>
            </div>
        </section>

        <!-- Footer -->
        <footer class="border-t border-gray-900 bg-black py-12 px-6">
            <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <span class="text-2xl font-bold tracking-widest font-mono">F - CODE . X</span>
                    <p class="text-gray-600 text-xs mt-2">EST. 2024 // SECTOR 7G</p>
                    <div class="flex space-x-4 mt-2 text-[10px] font-mono text-gray-500">
                        <button onclick="openLegal('privacy')" class="hover:text-cyan-400 transition-colors uppercase cursor-pointer">[ Privacy Protocol ]</button>
                        <button onclick="openLegal('terms')" class="hover:text-cyan-400 transition-colors uppercase cursor-pointer">[ Terms of Ops ]</button>
                    </div>
                </div>
                <div class="flex space-x-6 text-gray-500">
                    <a href="https://github.com/omaairsk" target="_blank" class="hover:text-cyan-400 transition-colors"><i data-lucide="github"></i></a>
                    <a href="https://x.com/itsmefardin" target="_blank" class="hover:text-cyan-400 transition-colors"><i data-lucide="twitter"></i></a>
                    <a href="https://www.linkedin.com/in/iamfardinsk" target="_blank" class="hover:text-cyan-400 transition-colors"><i data-lucide="linkedin"></i></a>
                </div>
            </div>
            <div class="text-center mt-8 text-gray-800 text-xs font-mono">
                SYSTEM GENERATED. ALL RIGHTS RESERVED.
            </div>
        </footer>

    </main>

    <!-- Legal Modal Overlay -->
    <div id="legal-modal" class="fixed inset-0 z-[100] hidden flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/90 backdrop-blur-md" onclick="closeLegal()"></div>
        <div class="relative glass-strong p-8 max-w-2xl w-full max-h-[80vh] overflow-y-auto border border-cyan-500/30 shadow-[0_0_50px_rgba(0,242,255,0.1)] transform transition-all duration-300 scale-95 opacity-0" id="legal-content-box">
            <button onclick="closeLegal()" class="absolute top-6 right-6 text-gray-400 hover:text-white transition-colors">
                <i data-lucide="x"></i>
            </button>
            <h2 id="modal-title" class="text-3xl font-bold mb-6 font-mono text-cyan-400 border-b border-gray-800 pb-4"></h2>
            <div id="modal-body" class="text-gray-300 space-y-4 font-mono text-sm leading-relaxed"></div>
        </div>
    </div>


    <!-- ========================================== -->
    <!--        INTEGRATED ADMIN INTERFACE          -->
    <!-- ========================================== -->
    <div id="admin-interface" class="admin-overlay flex-col text-white font-mono">
        <div class="cyber-grid"></div>

        <!-- 1. Admin Login Screen -->
        <div id="admin-login" class="absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm">
            <div class="w-full max-w-md p-8 glass-strong border border-cyan-900 relative overflow-hidden text-center">
                <div class="absolute top-0 left-0 w-full h-1 bg-cyan-500 shadow-[0_0_10px_#00f2ff]"></div>
                <button onclick="closeAdminPanel()" class="absolute top-4 right-4 text-gray-500 hover:text-white"><i data-lucide="x"></i></button>
                
                <h1 class="text-3xl font-bold mb-2 tracking-widest text-cyan-400">RESTRICTED ACCESS</h1>
                <p class="text-xs text-gray-500 mb-8">SECTOR 7G // ADMIN AUTHENTICATION</p>
                
                <form onsubmit="handleAdminLogin(event)" class="space-y-4">
                    <input type="password" id="admin-code" class="w-full bg-black/50 border border-gray-700 text-center text-xl p-4 text-white focus:border-cyan-400 focus:outline-none tracking-[0.5em]" placeholder="XXXXX" autofocus>
                    <button type="submit" class="w-full bg-cyan-900/30 border border-cyan-500 text-cyan-400 py-3 hover:bg-cyan-500 hover:text-black transition-all">
                        [ AUTHENTICATE ]
                    </button>
                </form>
                <p id="login-error" class="text-red-500 text-xs mt-4 hidden">>> ACCESS DENIED.</p>
            </div>
        </div>

        <!-- 2. Admin Dashboard (Hidden until login) -->
        <div id="admin-dashboard" class="hidden flex-1 flex flex-col h-full relative z-10 scanline">
            <!-- Admin Header -->
            <header class="h-16 border-b border-gray-800 flex justify-between items-center px-6 bg-black/40 backdrop-blur-md">
                <div class="flex items-center gap-3">
                    <div class="w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
                    <span class="font-bold tracking-widest text-lg">ADMIN :: TERMINAL</span>
                </div>
                <button onclick="closeAdminPanel()" class="text-xs border border-red-500/50 text-red-400 px-3 py-1 hover:bg-red-500 hover:text-black transition-colors">
                    [ EXIT SYSTEM ]
                </button>
            </header>

            <div class="flex flex-1 overflow-hidden">
                <!-- Sidebar -->
                <aside class="w-16 md:w-64 border-r border-gray-800 bg-black/20 flex flex-col pt-4">
                    <nav class="space-y-1 px-2">
                        <button class="w-full text-left p-3 rounded bg-cyan-500/10 text-cyan-400 border border-cyan-500/30 flex items-center gap-3">
                            <i data-lucide="inbox" class="w-5 h-5"></i>
                            <span class="hidden md:block text-sm">INBOX</span>
                        </button>
                        <!-- Mock buttons -->
                        <button class="w-full text-left p-3 rounded text-gray-500 hover:text-white flex items-center gap-3 transition-colors">
                            <i data-lucide="bar-chart-2" class="w-5 h-5"></i>
                            <span class="hidden md:block text-sm">ANALYTICS</span>
                        </button>
                    </nav>
                </aside>

                <!-- Messages Area -->
                <main class="flex-1 flex flex-col min-w-0 bg-black/10 p-4 md:p-8 overflow-auto custom-scroll">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="p-6 border-l-2 border-cyan-500 bg-white/5">
                            <div class="text-gray-400 text-xs mb-1">TOTAL PACKETS</div>
                            <div class="text-3xl font-bold" id="stat-total">0</div>
                        </div>
                        <div class="p-6 border-l-2 border-purple-500 bg-white/5">
                            <div class="text-gray-400 text-xs mb-1">PENDING</div>
                            <div class="text-3xl font-bold text-purple-400" id="stat-pending">0</div>
                        </div>
                    </div>

                    <div id="admin-msg-container" class="space-y-4">
                        <div class="text-center text-gray-500 mt-10">[ WAITING FOR DATA STREAM... ]</div>
                    </div>
                </main>
            </div>
        </div>

        <!-- 3. Admin Reply Modal -->
        <div id="admin-reply-modal" class="absolute inset-0 z-[60] bg-black/90 backdrop-blur-sm hidden items-center justify-center p-4">
            <div class="w-full max-w-2xl p-8 glass-strong border border-cyan-500/50 relative">
                <button onclick="closeReplyModal()" class="absolute top-4 right-4 text-gray-500 hover:text-white"><i data-lucide="x"></i></button>
                <h3 class="text-xl font-bold text-cyan-400 mb-6 flex items-center gap-2">
                    <i data-lucide="send"></i> COMPOSE RESPONSE
                </h3>
                
                <div class="space-y-4 text-sm">
                    <input type="hidden" id="reply-id">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-500 text-xs mb-1">TARGET ID</label>
                            <input type="text" id="reply-name" readonly class="w-full bg-black/50 border border-gray-700 p-2 text-gray-300">
                        </div>
                        <div>
                            <label class="block text-gray-500 text-xs mb-1">TARGET FREQUENCY</label>
                            <input type="text" id="reply-email" readonly class="w-full bg-black/50 border border-gray-700 p-2 text-gray-300">
                        </div>
                    </div>
                    <div>
                        <label class="block text-gray-500 text-xs mb-1">ORIGINAL PACKET</label>
                        <div id="reply-original" class="w-full bg-black/30 border border-gray-800 p-3 text-gray-400 italic text-xs h-20 overflow-y-auto"></div>
                    </div>
                    <div class="flex gap-4 pt-2">
                        <button onclick="markAsRepliedInternal()" class="flex-1 bg-cyan-600/20 border border-cyan-500 text-cyan-400 py-3 font-bold hover:bg-cyan-500 hover:text-black transition-all">
                            [ MARK RESOLVED ]
                        </button>
                        <a id="admin-mailto" href="#" class="flex-1 border border-gray-600 text-gray-400 py-3 font-bold hover:border-white hover:text-white transition-all text-center flex items-center justify-center gap-2">
                            <i data-lucide="external-link" class="w-4 h-4"></i> OPEN MAIL CLIENT
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js';
        import { getAuth, signInAnonymously, signInWithCustomToken } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js';
        import { getFirestore, collection, addDoc, serverTimestamp, onSnapshot, updateDoc, deleteDoc, doc } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';

        // 1. Initialize Firebase
        const firebaseConfig = JSON.parse(__firebase_config);
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

        // 2. Auth Sequence
        async function initAuth() {
            try {
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
                console.log("System Authenticated");
            } catch (error) {
                console.error("Auth Failure:", error);
            }
        }
        initAuth();

        // 3. Audio & Voice System
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        const playUiSound = () => {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(800, audioCtx.currentTime); 
            oscillator.frequency.exponentialRampToValueAtTime(300, audioCtx.currentTime + 0.1);
            gainNode.gain.setValueAtTime(0.05, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.1);
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            oscillator.start();
            oscillator.stop(audioCtx.currentTime + 0.1);
        };

        window.addEventListener('load', () => {
            lucide.createIcons();
            const loader = document.getElementById('loader');
            const loaderText = loader.querySelector('div');

            setTimeout(() => {
                loaderText.innerHTML = "SYSTEM READY. <br/><span class='text-sm text-white/50 block mt-4'>[ CLICK TO ENTER UNIVERSE ]</span>";
                loaderText.classList.remove('animate-pulse');
                loader.style.cursor = "pointer";
            }, 1500);

            const activateSystem = () => {
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance("Website loaded, sir. Welcome to our universe.");
                    utterance.rate = 0.9;
                    utterance.pitch = 0.8;
                    const voices = window.speechSynthesis.getVoices();
                    const preferredVoice = voices.find(v => v.name.includes('Google US English') || v.name.includes('Samantha'));
                    if (preferredVoice) utterance.voice = preferredVoice;
                    window.speechSynthesis.speak(utterance);
                }
                loader.style.opacity = '0';
                setTimeout(() => { loader.style.display = 'none'; }, 500);
            };
            loader.addEventListener('click', activateSystem, { once: true });

            document.addEventListener('mousedown', (e) => {
                if(e.target.closest('button') || e.target.closest('a')) playUiSound();
            });
        });


        // 4. Public Form Handling
        const form = document.getElementById('contact-form');
        const btn = document.getElementById('submit-btn');
        const btnText = document.getElementById('btn-text');
        const statusMsg = document.getElementById('status-msg');

        if(form) {
            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                const originalText = btnText.innerText;
                btnText.innerText = "[ UPLOADING PACKET... ]";
                btn.disabled = true;
                btn.classList.add('opacity-50', 'cursor-not-allowed');

                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const message = document.getElementById('message').value;

                try {
                    if (!auth.currentUser) await initAuth();
                    await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'contact_messages'), {
                        name: name, email: email, message: message,
                        timestamp: serverTimestamp(),
                        status: 'new'
                    });
                    
                    btnText.innerText = "[ TRANSMISSION COMPLETE ]";
                    statusMsg.innerHTML = '<span class="text-green-400">>> Data packet received successfully.</span>';
                    form.reset();
                    setTimeout(() => { btnText.innerText = originalText; btn.disabled = false; btn.classList.remove('opacity-50', 'cursor-not-allowed'); statusMsg.innerHTML = ''; }, 3000);
                } catch (error) {
                    console.error("Error:", error);
                    btnText.innerText = "[ FAILED ]";
                    setTimeout(() => { btnText.innerText = originalText; btn.disabled = false; btn.classList.remove('opacity-50', 'cursor-not-allowed'); }, 3000);
                }
            });
        }


        // 5. Admin Panel Logic
        let adminListenerUnsubscribe = null;

        window.openAdminPanel = () => {
            document.getElementById('admin-interface').classList.add('admin-visible');
            document.body.style.overflow = 'hidden';
        };

        window.closeAdminPanel = () => {
            document.getElementById('admin-interface').classList.remove('admin-visible');
            document.body.style.overflow = '';
        };

        window.handleAdminLogin = (e) => {
            e.preventDefault();
            const code = document.getElementById('admin-code').value;
            if (code === 'admin') {
                document.getElementById('admin-login').classList.add('hidden');
                document.getElementById('admin-dashboard').classList.remove('hidden');
                startAdminDataStream();
            } else {
                document.getElementById('login-error').classList.remove('hidden');
            }
        };

        function startAdminDataStream() {
            if (adminListenerUnsubscribe) return;
            const q = collection(db, 'artifacts', appId, 'public', 'data', 'contact_messages');
            adminListenerUnsubscribe = onSnapshot(q, (snapshot) => {
                const msgs = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }))
                    .sort((a, b) => (b.timestamp?.seconds || 0) - (a.timestamp?.seconds || 0));
                updateAdminUI(msgs);
            });
        }

        function updateAdminUI(msgs) {
            document.getElementById('stat-total').innerText = msgs.length;
            document.getElementById('stat-pending').innerText = msgs.filter(m => m.status !== 'replied').length;

            const container = document.getElementById('admin-msg-container');
            container.innerHTML = '';

            if (msgs.length === 0) {
                container.innerHTML = '<div class="text-center text-gray-500 mt-10">NO MESSAGES FOUND</div>';
                return;
            }

            msgs.forEach(msg => {
                const isReplied = msg.status === 'replied';
                const date = msg.timestamp ? new Date(msg.timestamp.seconds * 1000).toLocaleString() : 'Processing...';
                
                const card = document.createElement('div');
                card.className = `p-6 border-l-4 transition-all hover:bg-white/5 mb-4 ${isReplied ? 'border-gray-600 opacity-60 bg-black/40' : 'border-cyan-500 bg-white/5'}`;
                card.innerHTML = `
                    <div class="flex flex-col md:flex-row justify-between items-start gap-4">
                        <div class="flex-1">
                            <div class="flex items-center gap-3 mb-2">
                                <span class="font-bold text-lg text-white font-mono">${escapeHtml(msg.name)}</span>
                                <span class="status-badge ${isReplied ? 'bg-gray-800 text-gray-400' : 'bg-cyan-900 text-cyan-300 animate-pulse'}">
                                    ${isReplied ? 'RESOLVED' : 'NEW'}
                                </span>
                            </div>
                            <div class="text-xs text-gray-500 mb-2 flex gap-4">
                                <span>${escapeHtml(msg.email)}</span>
                                <span>${date}</span>
                            </div>
                            <div class="text-gray-300 text-sm leading-relaxed">${escapeHtml(msg.message)}</div>
                        </div>
                        <div class="flex gap-2">
                            <button onclick="openReplyModal('${msg.id}', '${escapeHtml(msg.name)}', '${escapeHtml(msg.email)}', '${escapeHtml(msg.message).replace(/'/g, "\\'")}')" class="bg-cyan-900/40 text-cyan-400 px-4 py-2 text-xs border border-cyan-500/30 hover:bg-cyan-500 hover:text-black transition-colors">REPLY</button>
                            <button onclick="deleteMessage('${msg.id}')" class="bg-red-900/40 text-red-400 px-4 py-2 text-xs border border-red-500/30 hover:bg-red-500 hover:text-black transition-colors">DEL</button>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
            lucide.createIcons();
        }

        function escapeHtml(text) { return text ? text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;") : ''; }

        window.openReplyModal = (id, name, email, msg) => {
            document.getElementById('reply-id').value = id;
            document.getElementById('reply-name').value = name;
            document.getElementById('reply-email').value = email;
            document.getElementById('reply-original').innerText = msg;
            
            const subject = encodeURIComponent(`RE: F-Code.X Transmission`);
            const body = encodeURIComponent(`Greetings ${name},\n\nRegarding: "${msg}"\n\n[Your Reply]`);
            document.getElementById('admin-mailto').href = `mailto:${email}?subject=${subject}&body=${body}`;
            document.getElementById('admin-mailto').onclick = () => markAsRepliedInternal(); 

            document.getElementById('admin-reply-modal').classList.remove('hidden');
            document.getElementById('admin-reply-modal').classList.add('flex');
        };

        window.closeReplyModal = () => {
            document.getElementById('admin-reply-modal').classList.add('hidden');
            document.getElementById('admin-reply-modal').classList.remove('flex');
        };

        window.markAsRepliedInternal = async () => {
            const id = document.getElementById('reply-id').value;
            if(!id) return;
            try {
                await updateDoc(doc(db, 'artifacts', appId, 'public', 'data', 'contact_messages', id), { status: 'replied' });
                closeReplyModal();
            } catch(e) { console.error(e); }
        };

        window.deleteMessage = async (id) => {
            if(confirm('Permanently delete this packet?')) {
                try {
                    await deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', 'contact_messages', id));
                } catch(e) { console.error(e); }
            }
        };

        // 6. Legal Modal
        const legalData = {
            privacy: { title: "PRIVACY_PROTOCOL_v1.0", content: "<p class='text-cyan-200'>// DATA_COLLECTION_INIT</p><p>F - Code . X respects your digital footprint. We collect only the data you explicitly transmit via our communication modules.</p>" },
            terms: { title: "TERMS_OF_OPERATIONS", content: "<p class='text-cyan-200'>// SYSTEM_ACCESS</p><p>By accessing F - Code . X, you agree to navigate our digital construct responsibly.</p>" }
        };

        const modal = document.getElementById('legal-modal');
        const contentBox = document.getElementById('legal-content-box');
        const modalTitle = document.getElementById('modal-title');
        const modalBody = document.getElementById('modal-body');

        window.openLegal = (type) => {
            const data = legalData[type];
            if(!data) return;
            modalTitle.innerText = data.title;
            modalBody.innerHTML = data.content;
            modal.classList.remove('hidden');
            setTimeout(() => { contentBox.classList.remove('scale-95', 'opacity-0'); contentBox.classList.add('scale-100', 'opacity-100'); }, 10);
        };

        window.closeLegal = () => {
            contentBox.classList.remove('scale-100', 'opacity-100');
            contentBox.classList.add('scale-95', 'opacity-0');
            setTimeout(() => { modal.classList.add('hidden'); }, 300);
        };

        // 7. 3D Background
        const initThreeJS = () => {
            const container = document.getElementById('canvas-container');
            const scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2(0x020202, 0.002); 

            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 25;
            camera.position.y = 2;

            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.shadowMap.enabled = true;
            container.appendChild(renderer.domElement);

            const ambientLight = new THREE.AmbientLight(0x222222);
            scene.add(ambientLight);

            const light1 = new THREE.PointLight(0x00f2ff, 2, 100);
            light1.position.set(10, 10, 10);
            light1.castShadow = true;
            scene.add(light1);

            const light2 = new THREE.PointLight(0x7000ff, 2, 100);
            light2.position.set(-10, -10, 10);
            scene.add(light2);

            const coreGroup = new THREE.Group();
            scene.add(coreGroup);

            const torusKnotGeo = new THREE.TorusKnotGeometry(3.5, 1, 100, 16);
            const metalMaterial = new THREE.MeshStandardMaterial({ color: 0x111111, metalness: 0.9, roughness: 0.2, emissive: 0x001133, emissiveIntensity: 0.2 });
            const torusKnot = new THREE.Mesh(torusKnotGeo, metalMaterial);
            torusKnot.castShadow = true;
            coreGroup.add(torusKnot);

            const ringGeo = new THREE.TorusGeometry(8, 0.05, 16, 100);
            const ringMat = new THREE.MeshBasicMaterial({ color: 0x00f2ff, transparent: true, opacity: 0.3 });
            const ring1 = new THREE.Mesh(ringGeo, ringMat); ring1.rotation.x = Math.PI / 2;
            const ring2 = new THREE.Mesh(ringGeo, ringMat); ring2.rotation.y = Math.PI / 4;
            coreGroup.add(ring1); coreGroup.add(ring2);

            const particlesGeometry = new THREE.BufferGeometry();
            const particlesCount = 1500;
            const posArray = new Float32Array(particlesCount * 3);
            for(let i = 0; i < particlesCount * 3; i++) posArray[i] = (Math.random() - 0.5) * 100;
            particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
            
            const getTexture = () => {
                const canvas = document.createElement('canvas'); canvas.width = 32; canvas.height = 32;
                const ctx = canvas.getContext('2d');
                const gradient = ctx.createRadialGradient(16, 16, 0, 16, 16, 16);
                gradient.addColorStop(0, 'rgba(255, 255, 255, 1)'); gradient.addColorStop(0.2, 'rgba(0, 242, 255, 1)'); gradient.addColorStop(1, 'rgba(0,0,0,0)');
                ctx.fillStyle = gradient; ctx.fillRect(0, 0, 32, 32);
                const texture = new THREE.Texture(canvas); texture.needsUpdate = true; return texture;
            };

            const particlesMaterial = new THREE.PointsMaterial({ size: 0.5, map: getTexture(), transparent: true, blending: THREE.AdditiveBlending, depthWrite: false });
            const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
            scene.add(particlesMesh);

            let mouseX = 0, mouseY = 0, targetX = 0, targetY = 0;
            const windowHalfX = window.innerWidth / 2, windowHalfY = window.innerHeight / 2;
            document.addEventListener('mousemove', (e) => { mouseX = (e.clientX - windowHalfX); mouseY = (e.clientY - windowHalfY); });

            const clock = new THREE.Clock();
            const animate = () => {
                const elapsedTime = clock.getElapsedTime();
                targetX = mouseX * 0.001; targetY = mouseY * 0.001;
                torusKnot.rotation.y += 0.01; torusKnot.rotation.z += 0.005;
                ring1.rotation.z += 0.002; ring1.rotation.x = Math.sin(elapsedTime * 0.5) * 0.2;
                ring2.rotation.x += 0.002; ring2.rotation.y += 0.002;
                coreGroup.position.y = Math.sin(elapsedTime * 0.5) * 0.5;
                particlesMesh.rotation.y = elapsedTime * 0.05;
                coreGroup.rotation.y += 0.05 * (targetX - coreGroup.rotation.y);
                coreGroup.rotation.x += 0.05 * (targetY - coreGroup.rotation.x);
                renderer.render(scene, camera);
                requestAnimationFrame(animate);
            };
            animate();
            window.addEventListener('resize', () => { camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); });
        };
        initThreeJS();
    </script>
</body>
</html>
